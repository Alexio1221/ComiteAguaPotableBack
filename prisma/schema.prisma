generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  idUsuario  Int      @id @default(autoincrement())
  nombre     String
  apellido   String
  telefono   String
  usuario    String   @unique
  contrase√±a String
  creadoEn   DateTime @default(now())
  modificadoEn DateTime @updatedAt
  roles  UsuarioRol[]
  sesiones      Sesion[]
}

model Rol {
  idRol       Int @id @default(autoincrement())
  nombreRol   String
  descripcion String @db.Text
  usuarios    UsuarioRol[]
  funciones   Funcion[]
}

model UsuarioRol {
  idUsuario     Int
  idRol         Int
  estado        Boolean @default(true)
  fechaCreacion DateTime @default(now())
  fechaModificacion DateTime @updatedAt
  usuario        Usuario @relation(fields: [idUsuario], references: [idUsuario])
  rol            Rol @relation(fields: [idRol], references: [idRol])
  @@id([idUsuario, idRol])
}

model Funcion {
  idFuncion      Int @id @default(autoincrement())
  idRol          Int
  nombreFuncion  String
  icono          String
  rol            Rol @relation(fields: [idRol], references: [idRol])
}

model Sesion {
  idSesion   Int      @id @default(autoincrement())
  idUsuario  Int
  usuario    Usuario  @relation(fields: [idUsuario], references: [idUsuario])
  rolActual  String   
  tokenSesion  String   
  estado        Boolean @default(true)
  creadoEn   DateTime @default(now())
  actualizadoEn DateTime @updatedAt
}
